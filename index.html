<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FF Diamond Shop | Boutique Officielle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #00d4ff;
      --secondary: #0a0b10;
      --accent: #ffcc00;
      --card-bg: #161b22;
      --text: #fff;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Poppins', system-ui;
      background: var(--secondary);
      color: var(--text);
      margin: 0;
      overflow-x: hidden;
    }

    /* Arri√®re-plan anim√© */
    .bg-shapes { position: fixed; inset: 0; overflow: hidden; z-index: 0; pointer-events: none; }
    .shape { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.15; animation: float 20s infinite ease-in-out; }
    .shape1 { width: 500px; height: 500px; background: var(--primary); top: -200px; left: -200px; }
    .shape2 { width: 400px; height: 400px; background: var(--accent); bottom: -150px; right: -150px; animation-delay: 5s; }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(40px, -40px) scale(1.1); }
    }

    .content { position: relative; z-index: 1; }

    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(15, 20, 27, 0.95);
      border-bottom: 1px solid #30363d;
      backdrop-filter: blur(10px);
    }

    .nav {
      max-width: 1100px;
      margin: auto;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand {
      font-weight: 800;
      font-size: 20px;
      background: linear-gradient(135deg, #00d4ff, #0082ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .container { max-width: 1100px; margin: auto; padding: 40px 20px; }

    .hero {
      display: grid;
      grid-template-columns: 1.3fr 1fr;
      gap: 30px;
      align-items: center;
      margin-bottom: 40px;
    }

    .hero h1 {
      font-size: clamp(28px, 5vw, 42px);
      background: linear-gradient(135deg, #fff, var(--primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 15px;
    }

    .hero img {
      width: 100%;
      max-width: 400px;
      filter: drop-shadow(0 10px 30px rgba(0, 212, 255, 0.4));
      border-radius: 20px;
    }

    /* Grille de produits */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
    }

    .card {
      background: rgba(22, 27, 34, 0.9);
      border: 1px solid #30363d;
      border-radius: 20px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
    }

    .card:hover {
      transform: translateY(-10px);
      border-color: var(--primary);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
    }

    .product-img { width: 120px; height: 120px; object-fit: contain; margin-bottom: 15px; }
    
    .price {
      display: block;
      font-size: 24px;
      font-weight: 800;
      color: var(--accent);
      margin: 10px 0;
    }

    .btn {
      background: linear-gradient(45deg, #0082ff, #00d4ff);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: 0.3s;
    }

    .btn:hover { opacity: 0.9; transform: scale(1.02); }
    .btn.ghost { background: transparent; border: 1px solid #30363d; margin-top: 10px; }
    .btn.danger { background: #ff4444; margin-top: 10px; font-size: 12px; padding: 5px; }

    /* Modal et Panier */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .modal-box {
      background: #0f141b;
      width: min(95%, 500px);
      max-height: 90vh;
      overflow-y: auto;
      padding: 30px;
      border-radius: 20px;
      border: 2px solid var(--primary);
    }

    .form-group { margin-bottom: 15px; text-align: left; }
    .form-group label { display: block; font-size: 14px; color: var(--primary); margin-bottom: 5px; }
    .form-group input, .form-group select {
      width: 100%;
      padding: 12px;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 10px;
      color: white;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #161b22;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 10px;
      border-left: 3px solid var(--primary);
    }

    /* LOADER 30 SECONDES */
    .loader-overlay {
      position: fixed;
      inset: 0;
      background: #0a0b10;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .loader-container {
      width: 280px;
      height: 12px;
      background: #161b22;
      border-radius: 10px;
      border: 1px solid var(--primary);
      overflow: hidden;
      margin: 20px 0;
    }

    .loader-bar {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, var(--primary), #00ff88);
      transition: width 0.1s linear;
    }

    #loaderPercent { font-size: 24px; font-weight: 800; color: var(--primary); }
    #loaderStatus { color: #fff; opacity: 0.7; font-size: 14px; margin-top: 10px; text-align: center; padding: 0 20px;}

    .cart-badge {
        background: #ff4444;
        font-size: 12px;
        padding: 2px 7px;
        border-radius: 50%;
        margin-left: 5px;
    }

    @media (max-width: 768px) {
      .hero { grid-template-columns: 1fr; text-align: center; }
      .hero img { margin: auto; }
    }
  </style>
</head>
<body>

<div class="bg-shapes">
  <div class="shape shape1"></div>
  <div class="shape shape2"></div>
</div>

<div class="loader-overlay" id="loaderOverlay">
  <div style="font-weight: 800; color: #fff; letter-spacing: 2px;">TRAITEMENT S√âCURIS√â</div>
  <div class="loader-container">
    <div class="loader-bar" id="loaderBar"></div>
  </div>
  <div id="loaderPercent">0%</div>
  <div id="loaderStatus">Pr√©paration de la commande...</div>
</div>

<div class="content">
  <header>
    <div class="nav">
      <div class="brand">üíé FF DIAMOND SHOP</div>
      <button class="btn" style="width: auto;" onclick="openModal()">üõí Panier <span id="cartCount" class="cart-badge" style="display:none">0</span></button>
    </div>
  </header>

  <section class="container hero">
    <div>
      <h1>Recharge Directe Free Fire</h1>
      <p>Paiement s√©curis√© via <b>Mobile Money</b>. Livraison instantan√©e sur votre ID Player.</p>
    </div>
    <img src="https://i.ibb.co/ZppWvQrc/531701642-748394264629785-3895236103836514434-n-jpg-stp-dst-jpg-s720x720-tt6-nc-cat-109-ccb-1-7-nc.jpg" alt="FF Logo">
  </section>

  <main class="container">
    <h2 style="margin-bottom: 25px;">üíé Nos Packs Diamants</h2>
    <div class="grid" id="diamondGrid"></div>

    <h2 style="margin: 50px 0 25px;">‚≠ê Abonnements</h2>
    <div class="grid" id="subscriptionGrid"></div>
  </main>

  <footer style="text-align: center; padding: 40px; opacity: 0.4; font-size: 12px;">
    &copy; 2026 FF Diamond Shop - Service Officiel de Recharge
  </footer>
</div>

<div class="modal" id="modal">
  <div class="modal-box">
    <h2 style="margin-bottom: 20px;">Votre Panier</h2>
    <div id="cartItems"></div>
    
    <div id="formSection" style="display:none; margin-top: 20px; border-top: 1px solid #333; padding-top: 20px;">
      <h3 style="margin-bottom: 15px; font-size: 16px; color: var(--accent);">Informations de livraison :</h3>
      <div class="form-group">
        <label>Pr√©nom & Nom *</label>
        <input type="text" id="fullName" placeholder="Ex: Jean Dupont">
      </div>
      <div class="form-group">
        <label>Pays *</label>
        <select id="country">
          <option value="">S√©lectionnez votre pays</option>
          <option value="Cameroun">Cameroun</option>
          <option value="Guin√©e √âquatoriale ">Guin√©e √âquatoriale</option>
          
          <option value="Congo">Congo</option>
          <option value="Gabon">Gabon</option>
        </select>
      </div>
      <div class="form-group">
        <label>ID Player Free Fire *</label>
        <input type="number" id="idPlayer" placeholder="Ex: 102938475">
      </div>

      <div id="totalPrice" style="font-size: 22px; font-weight: 800; color: var(--accent); margin: 20px 0; text-align: right; border-top: 1px dashed #444; padding-top: 10px;"></div>
      
      <button class="btn" onclick="startLoading()">‚úÖ CONFIRMER ET PAYER TOUT</button>
    </div>
    
    <button class="btn ghost" onclick="closeModal()">‚ûï Continuer les achats</button>
  </div>
</div>

<script>
const products = {
  diamonds: [
    { id: 1, name: '110 Diamants', price: 700 },
    { id: 2, name: '231 Diamants', price: 1700 },
    { id: 3, name: '583 Diamants', price: 3500 },
    { id: 4, name: '1188 Diamants', price: 6500 },
    { id: 5, name: '2420 Diamants', price: 14500 }
  ],
  subs: [
    { id: 10, name: 'Abo Hebdomadaire', price: 1700 },
    { id: 11, name: 'Abo Mensuel', price: 7000 }
  ]
};

let cart = {};

function loadUI() {
  const dGrid = document.getElementById('diamondGrid');
  dGrid.innerHTML = products.diamonds.map(p => `
    <div class="card">
      <img class="product-img" src="https://i.ibb.co/cSn63Jvc/495077066-608102602304064-8697694855776305520-n-jpg-nc-cat-101-ccb-1-7-nc-sid-9f807c-nc-eui2-Ae-FF.jpg">
      <h3>${p.name}</h3>
      <span class="price">${p.price} FCFA</span>
      <button class="btn" onclick="addToCart(${p.id}, 'diamonds')">Ajouter au panier</button>
    </div>
  `).join('');

  const sGrid = document.getElementById('subscriptionGrid');
  sGrid.innerHTML = products.subs.map(p => `
    <div class="card">
      <img class="product-img" src="https://i.ibb.co/sdXr0TyT/614184102-1560285791686856-6336493226340822985-n-jpg-stp-dst-jpg-p480x480-tt6-nc-cat-102-ccb-1-7-n.jpg">
      <h3>${p.name}</h3>
      <span class="price">${p.price} FCFA</span>
      <button class="btn" onclick="addToCart(${p.id}, 'subs')">Ajouter au panier</button>
    </div>
  `).join('');
}

function addToCart(id, category) {
  const p = products[category].find(x => x.id === id);
  if (cart[id]) {
    cart[id].qty++;
  } else {
    cart[id] = { ...p, qty: 1 };
  }
  updateCart();
  openModal(); // Ouvre le panier pour montrer qu'il est ajout√©, mais on peut en ajouter d'autres
}

function removeFromCart(id) {
  delete cart[id];
  updateCart();
}

function updateCart() {
  const itemsDiv = document.getElementById('cartItems');
  const items = Object.values(cart);
  const badge = document.getElementById('cartCount');
  
  if (items.length === 0) {
    itemsDiv.innerHTML = "<p style='text-align:center; opacity:0.5; padding: 20px;'>Votre panier est vide.</p>";
    document.getElementById('formSection').style.display = "none";
    badge.style.display = "none";
  } else {
    itemsDiv.innerHTML = items.map(i => `
      <div class="cart-item">
        <div>
          <b style="color:white">${i.name}</b><br>
          <small>${i.price} FCFA x ${i.qty}</small>
        </div>
        <div style="text-align:right">
          <div style="font-weight:bold; color:var(--primary)">${i.price * i.qty} FCFA</div>
          <button class="btn danger" onclick="removeFromCart(${i.id})">Supprimer</button>
        </div>
      </div>
    `).join('');
    
    let total = items.reduce((sum, i) => sum + (i.price * i.qty), 0);
    document.getElementById('totalPrice').innerText = "TOTAL √Ä PAYER : " + total + " FCFA";
    document.getElementById('formSection').style.display = "block";
    
    let totalQty = items.reduce((sum, i) => sum + i.qty, 0);
    badge.innerText = totalQty;
    badge.style.display = "inline";
  }
}

function openModal() { document.getElementById('modal').style.display = "flex"; }
function closeModal() { document.getElementById('modal').style.display = "none"; }

function startLoading() {
  const name = document.getElementById('fullName').value.trim();
  const country = document.getElementById('country').value;
  const idPlayer = document.getElementById('idPlayer').value.trim();

  if (!name || !country || !idPlayer) {
    alert("Veuillez remplir toutes vos informations !");
    return;
  }

  const overlay = document.getElementById('loaderOverlay');
  const bar = document.getElementById('loaderBar');
  const percent = document.getElementById('loaderPercent');
  const status = document.getElementById('loaderStatus');
  
  overlay.style.display = "flex";
  
  let progress = 0;
  const duration = 30000; // 30 SECONDES
  const step = 100; 
  const increment = (step / duration) * 100;

  const timer = setInterval(() => {
    progress += increment;
    if (progress > 100) progress = 100;
    
    bar.style.width = progress + "%";
    percent.innerText = Math.floor(progress) + "%";

    if(progress < 25) status.innerText = "Analyse du panier multi-articles...";
    else if(progress < 50) status.innerText = "V√©rification de l'ID : " + idPlayer;
    else if(progress < 75) status.innerText = "S√©curisation de la transaction...";
    else status.innerText = "G√©n√©ration du bon de commande final...";

    if (progress >= 100) {
      clearInterval(timer);
      finishOrder(name, country, idPlayer);
    }
  }, step);
}

function finishOrder(name, country, idPlayer) {
  const items = Object.values(cart);
  let total = items.reduce((sum, i) => sum + (i.price * i.qty), 0);
  
  let text = `üéÆ *COMMANDE GROUP√âE - FF SHOP*\n\n`;
  text += `üë§ *Client:* ${name}\n`;
  text += `üåç *Pays:* ${country}\n`;
  text += `üÜî *ID Player:* ${idPlayer}\n\n`;
  text += `üì¶ *CONTENU DU PANIER :*\n`;
  items.forEach(i => { 
    text += `- ${i.name} (x${i.qty}) = ${i.price * i.qty} FCFA\n`; 
  });
  text += `\nüí∞ *MONTANT TOTAL : ${total} FCFA*\n`;
  text += `üí≥ *Paiement:* Mobile Money`;

  const waUrl = `https://wa.me/237681246628?text=${encodeURIComponent(text)}`;
  window.location.href = waUrl;
}

window.onload = loadUI;
</script>
</body>
</html>